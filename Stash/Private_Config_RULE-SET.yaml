# > iphone Stash Private Config 
#   iPhone Stash è‡ªç”¨é…ç½®ï¼Œä»…ä¾›å‚è€ƒ
#   è§„åˆ™ä¸»è¦ä½¿ç”¨äº† rule-set
#   è§„åˆ™æ¥æºï¼šæœ¬ä»“åº“æ‹‰å–å…¶è‡ªä»–ä»“åº“ 
# >
# > âœï¸ æ´‹ san èŠ‹
# > ğŸ•™ last updateï¼š2025-12-06(UTC+8)

# icon éƒ¨åˆ†è®¾ç½®
# ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ icon url
# ä¸ºäº†ä¿æŒé…ç½®ç®€ä»‹ é€‚å½“å¢å‡
icon_url:
  Proxy: &Proxy "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Proxy.png"
  Static: &Static "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Static.png"
  Telegram: &Telegram "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Telegram.png"
  Spotify: &Spotify "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Spotify.png"
  YouTube: &YouTube "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png"
  Google_Search: &Google_Search "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Google_Search.png"
  Final: &Final "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Final.png"
  AmyTelecom: &AmyTelecom "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/AmyTelecom.png"
  # æ——å¸œ
  Hong_Kong: &Hong_Kong "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Hong_Kong.png"
  Taiwan: &Taiwan "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/China.png"
  Japan: &Japan "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Japan.png"
  Singapore: &Singapore "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Singapore.png"
  United_States: &United_States "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_States.png"

mode: rule
log-level: info

script:

  shortcuts:
    youtube-quic: network == 'udp' and dst_port == 443 and match_geosite('youtube') # geosite ä¹Ÿå¯æ”¹ä¸º rule-set å‰ææ˜¯è§„åˆ™éƒ¨åˆ†æœ‰
    instagram-quic: network == 'udp' and dst_port == 443 and match_geosite('instagram')

dns:
  skip-cert-verify: null
  nameserver-policy: null
  default-nameserver:
    - 223.5.5.5
    - 114.114.114.114
    - system
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fake-ip-filter:
    - +.lan
    - +.local
    - +.msftconnecttest.com
    - localhost.work.weixin.qq.com
    - '*.msftncsi.com'
    - '*.msftconnecttest.com'

# 
proxies: []

#
proxy-providers:
  proxy-providers-1:
    url:
    filter: "^(?!.*æµ·å¤–).*"
    interval: 86400

# ç­–ç•¥ç»„
proxy-groups:
  - &proxy-groups_select
    name: é€‰æ‹©ä»£ç†
    icon: *Proxy
    type: select
    interval: 600
    lazy: true
    proxies:
      - é¦™æ¸¯è‡ªåŠ¨
      - å°æ¹¾è‡ªåŠ¨
      - æ—¥æœ¬è‡ªåŠ¨
      - ç‹®åŸè‡ªåŠ¨
      - ç¾å›½è‡ªåŠ¨
      - DIRECT
  
  - <<: *proxy-groups_select
    name: æ¼ç½‘ä¹‹é±¼
    icon: *Final
    proxies:
      - DIRECT
      - é€‰æ‹©ä»£ç†

  # ç­–ç•¥ç»„æŒ‰åŒºåŸŸåˆ†ç±»
  - &proxy-groups_url-test
    <<: *proxy-groups_select
    name: é¦™æ¸¯è‡ªåŠ¨
    icon: *Hong_Kong
    filter: "(?i)(æ¾³é—¨|ğŸ‡²ğŸ‡´|æ¸¯|ğŸ‡­ğŸ‡°|hk|hong)"
    type: url-test
    proxies: null
    include-all: true

  - <<: *proxy-groups_url-test
    name: å°æ¹¾è‡ªåŠ¨
    icon: *Taiwan
    filter: "(?i)(å°|ğŸ‡¹ğŸ‡¼|æ¹¾|tw|taiwan)"

  - <<: *proxy-groups_url-test
    name: æ—¥æœ¬è‡ªåŠ¨
    icon: *Japan
    filter: "(?i)(æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|å¤§é˜ª|jp|japan)"

  - <<: *proxy-groups_url-test
    name: ç‹®åŸè‡ªåŠ¨
    icon: *Singapore
    filter: "(?i)(æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|sg|singapore)"

  - <<: *proxy-groups_url-test
    name: ç¾å›½è‡ªåŠ¨
    icon: *United_States
    filter: "(?i)(ç¾|ğŸ‡ºğŸ‡²|us|states|america|ç¡…)"

  # å…¶ä»–åŒºåŸŸ
  - <<: *proxy-groups_select
    name: å…¶ä»–åŒºåŸŸ
    icon: *AmyTelecom
    filter: (?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hong|å°|tw|taiwan|æ—¥æœ¬|jp|japan|éŸ©|kr|korea|ç¾|us|states|æ–°åŠ å¡|sg|singapore|ç¡…è°·|ç¡…))

# åˆ†æµè§„åˆ™
rules:

  - RULE-SET,ç§‹é£å»å¹¿å‘Š,REJECT-DROP,no-track # no-track çš„æ„æ€æ˜¯ä¸å‡ºç°åœ¨åå°
  - SCRIPT,instagram-quic,REJECT,no-track
  - SCRIPT,youtube-quic,REJECT,no-track
  - RULE-SET,private_ip,DIRECT,no-resolve
  - RULE-SET,private_domain,DIRECT
  - RULE-SET,github_domain,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,microsoft_domain,DIRECT
  - RULE-SET,speedtest_domain,DIRECT
  - RULE-SET,meta_domain,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,cloudflare_domain,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,spotify_domain,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,telegram_domain,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,youtube_domain,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,google_domain,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,apple_domain,DIRECT
  # - DOMAIN-SUFFIX,iphone-ld.apple.com,DIRECT
  # - DOMAIN-SUFFIX,lcdn-locator.apple.com,DIRECT
  # - DOMAIN-SUFFIX,lcdn-registration.apple.com,DIRECT
  # - DOMAIN-SUFFIX,push.apple.com,DIRECT
  - RULE-SET,geolocation-!cn,é€‰æ‹©ä»£ç†
  - RULE-SET,google_ip,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,telegram_ip,é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,cn_domain,DIRECT
  - RULE-SET,cn_ip,DIRECT
  - MATCH,æ¼ç½‘ä¹‹é±¼

rule-providers:

  ç§‹é£å»å¹¿å‘Š: &rule-providers_domain
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/AWAvenue-Ads-Rule-Clash.yaml
    format: yaml
    interval: 86400
    
  cn_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/cn_domain.yaml
    
  github_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/github_domain.yaml
    
  youtube_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/youtube_domain.yaml
    
  google_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/google_domain.yaml
    
  telegram_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/telegram_domain.yaml
    
  spotify_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/spotify_domain.yaml
    
  geolocation-!cn:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/geolocation-!cn_domain.yaml
    
  apple_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/apple_domain.yaml
    
  cloudflare_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/cloudflare_domain.yaml
    
  meta_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/meta_domain.yaml
    
  microsoft_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/microsoft_domain.yaml
    
  private_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/private_domain.yaml

  speedtest_domain:
    <<: *rule-providers_domain
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/domain/speedtest_domain.yaml

  # behavior: ipcidr
  private_ip: &rule-providers_ipcidr
    <<: *rule-providers_domain
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/ip/private_ip.yaml
    
  cn_ip:
    <<: *rule-providers_ipcidr
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/ip/cn_ip.yaml
    
  google_ip:
    <<: *rule-providers_ipcidr
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/ip/google_ip.yaml
    
  telegram_ip:
    <<: *rule-providers_ipcidr
    url: https://fastly.jsdelivr.net/gh/yangtudou/Script@main/RuleProviders/ip/telegram_ip.yaml
